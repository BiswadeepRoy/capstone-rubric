const session = require('express-session');
const Nedb = require('nedb-session-store');

module.exports = (options, app) => {
  if (options) {
    const defOptions = {
      secret: 'session.secret.key',
      resave: true,
      saveUninitialized: false
    };

    const resOptions = typeof options === 'object'
      ? Object.assign({}, defOptions, options)
      : defOptions;

    resOptions.store = resOptions.store || new Nedb(session)({
      filename: './sessions.db'
    });

    app.use(session(resOptions));
  }
};
